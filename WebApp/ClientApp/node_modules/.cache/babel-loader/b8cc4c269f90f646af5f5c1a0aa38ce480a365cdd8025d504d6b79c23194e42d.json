{"ast":null,"code":"import React,{useMemo}from'react';import DataTable from'./DataTable';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DevicesView(_ref){let{sessions,analysisResult}=_ref;const rows=useMemo(()=>{if(!(sessions!==null&&sessions!==void 0&&sessions.sessions))return[];// Aggregate per system\nconst map=new Map();sessions.sessions.forEach(s=>{const k=s.systemName;const v=map.get(k)||{systemName:k,users:new Set(),sessions:0,lastSeen:null};v.users.add(s.userId);v.sessions+=1;const t=new Date(s.sessionTimestamp);if(!v.lastSeen||t>v.lastSeen)v.lastSeen=t;map.set(k,v);});const issuesBySystem=new Map();((analysisResult===null||analysisResult===void 0?void 0:analysisResult.issues)||[]).forEach(i=>{(i.affectedSystems||[]).forEach(sys=>{const c=issuesBySystem.get(sys)||0;issuesBySystem.set(sys,c+1);});});return[...map.values()].map(v=>({systemName:v.systemName,users:v.users.size,sessions:v.sessions,issues:issuesBySystem.get(v.systemName)||0,lastSeen:v.lastSeen?v.lastSeen.toLocaleString():'—'}));},[sessions,analysisResult]);const columns=[{key:'systemName',label:'System'},{key:'users',label:'Users'},{key:'sessions',label:'Sessions'},{key:'issues',label:'Issues'},{key:'lastSeen',label:'Last Seen'}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Devices\"}),/*#__PURE__*/_jsx(DataTable,{columns:columns,rows:rows,initialSort:{key:'issues',direction:'desc'}})]});}","map":{"version":3,"names":["React","useMemo","DataTable","jsx","_jsx","jsxs","_jsxs","DevicesView","_ref","sessions","analysisResult","rows","map","Map","forEach","s","k","systemName","v","get","users","Set","lastSeen","add","userId","t","Date","sessionTimestamp","set","issuesBySystem","issues","i","affectedSystems","sys","c","values","size","toLocaleString","columns","key","label","children","initialSort","direction"],"sources":["C:/Work/UserSystemLogAnalyzer/WebApp/ClientApp/src/components/DevicesView.js"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport DataTable from './DataTable';\r\n\r\nexport default function DevicesView({ sessions, analysisResult }) {\r\n  const rows = useMemo(() => {\r\n    if (!sessions?.sessions) return [];\r\n    // Aggregate per system\r\n    const map = new Map();\r\n    sessions.sessions.forEach(s => {\r\n      const k = s.systemName;\r\n      const v = map.get(k) || { systemName: k, users: new Set(), sessions: 0, lastSeen: null };\r\n      v.users.add(s.userId);\r\n      v.sessions += 1;\r\n      const t = new Date(s.sessionTimestamp);\r\n      if (!v.lastSeen || t > v.lastSeen) v.lastSeen = t;\r\n      map.set(k, v);\r\n    });\r\n\r\n    const issuesBySystem = new Map();\r\n    (analysisResult?.issues || []).forEach(i => {\r\n      (i.affectedSystems || []).forEach(sys => {\r\n        const c = issuesBySystem.get(sys) || 0;\r\n        issuesBySystem.set(sys, c + 1);\r\n      });\r\n    });\r\n\r\n    return [...map.values()].map(v => ({\r\n      systemName: v.systemName,\r\n      users: v.users.size,\r\n      sessions: v.sessions,\r\n      issues: issuesBySystem.get(v.systemName) || 0,\r\n      lastSeen: v.lastSeen ? v.lastSeen.toLocaleString() : '—'\r\n    }));\r\n  }, [sessions, analysisResult]);\r\n\r\n  const columns = [\r\n    { key: 'systemName', label: 'System' },\r\n    { key: 'users', label: 'Users' },\r\n    { key: 'sessions', label: 'Sessions' },\r\n    { key: 'issues', label: 'Issues' },\r\n    { key: 'lastSeen', label: 'Last Seen' },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2>Devices</h2>\r\n      <DataTable columns={columns} rows={rows} initialSort={{ key: 'issues', direction: 'desc' }} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}