{"ast":null,"code":"import React,{useMemo}from'react';import DataTable from'./DataTable';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UsersView(_ref){let{sessions,analysisResult}=_ref;const rows=useMemo(()=>{if(!(sessions!==null&&sessions!==void 0&&sessions.sessions))return[];const map=new Map();sessions.sessions.forEach(s=>{const k=s.userId;const v=map.get(k)||{userId:k,systems:new Set(),sessions:0,lastSeen:null};v.systems.add(s.systemName);v.sessions+=1;const t=new Date(s.sessionTimestamp);if(!v.lastSeen||t>v.lastSeen)v.lastSeen=t;map.set(k,v);});const issuesByUser=new Map();((analysisResult===null||analysisResult===void 0?void 0:analysisResult.issues)||[]).forEach(i=>{(i.affectedUsers||[]).forEach(u=>{const c=issuesByUser.get(u)||0;issuesByUser.set(u,c+1);});});return[...map.values()].map(v=>({userId:v.userId,systems:v.systems.size,sessions:v.sessions,issues:issuesByUser.get(v.userId)||0,lastSeen:v.lastSeen?v.lastSeen.toLocaleString():'—'}));},[sessions,analysisResult]);const columns=[{key:'userId',label:'Employee'},{key:'systems',label:'Devices'},{key:'sessions',label:'Sessions'},{key:'issues',label:'Issues'},{key:'lastSeen',label:'Last Seen'}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Employees & Their Devices\"}),/*#__PURE__*/_jsx(DataTable,{columns:columns,rows:rows,initialSort:{key:'issues',direction:'desc'}})]});}","map":{"version":3,"names":["React","useMemo","DataTable","jsx","_jsx","jsxs","_jsxs","UsersView","_ref","sessions","analysisResult","rows","map","Map","forEach","s","k","userId","v","get","systems","Set","lastSeen","add","systemName","t","Date","sessionTimestamp","set","issuesByUser","issues","i","affectedUsers","u","c","values","size","toLocaleString","columns","key","label","children","initialSort","direction"],"sources":["C:/Work/UserSystemLogAnalyzer/WebApp/ClientApp/src/components/UsersView.js"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport DataTable from './DataTable';\r\n\r\nexport default function UsersView({ sessions, analysisResult }) {\r\n  const rows = useMemo(() => {\r\n    if (!sessions?.sessions) return [];\r\n    const map = new Map();\r\n    sessions.sessions.forEach(s => {\r\n      const k = s.userId;\r\n      const v = map.get(k) || { userId: k, systems: new Set(), sessions: 0, lastSeen: null };\r\n      v.systems.add(s.systemName);\r\n      v.sessions += 1;\r\n      const t = new Date(s.sessionTimestamp);\r\n      if (!v.lastSeen || t > v.lastSeen) v.lastSeen = t;\r\n      map.set(k, v);\r\n    });\r\n\r\n    const issuesByUser = new Map();\r\n    (analysisResult?.issues || []).forEach(i => {\r\n      (i.affectedUsers || []).forEach(u => {\r\n        const c = issuesByUser.get(u) || 0;\r\n        issuesByUser.set(u, c + 1);\r\n      });\r\n    });\r\n\r\n    return [...map.values()].map(v => ({\r\n      userId: v.userId,\r\n      systems: v.systems.size,\r\n      sessions: v.sessions,\r\n      issues: issuesByUser.get(v.userId) || 0,\r\n      lastSeen: v.lastSeen ? v.lastSeen.toLocaleString() : '—'\r\n    }));\r\n  }, [sessions, analysisResult]);\r\n\r\n  const columns = [\r\n    { key: 'userId', label: 'Employee' },\r\n    { key: 'systems', label: 'Devices' },\r\n    { key: 'sessions', label: 'Sessions' },\r\n    { key: 'issues', label: 'Issues' },\r\n    { key: 'lastSeen', label: 'Last Seen' },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2>Employees & Their Devices</h2>\r\n      <DataTable columns={columns} rows={rows} initialSort={{ key: 'issues', direction: 'desc' }} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}