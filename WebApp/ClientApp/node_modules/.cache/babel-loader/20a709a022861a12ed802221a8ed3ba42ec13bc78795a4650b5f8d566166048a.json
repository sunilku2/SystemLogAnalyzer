{"ast":null,"code":"import React,{useMemo,useState}from'react';import'./DataTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function sortRows(rows,sortKey,direction){if(!sortKey)return rows;const m=[...rows].sort((a,b)=>{const av=a[sortKey];const bv=b[sortKey];if(av===bv)return 0;if(av==null)return-1;if(bv==null)return 1;if(typeof av==='number'&&typeof bv==='number')return av-bv;return String(av).localeCompare(String(bv));});return direction==='desc'?m.reverse():m;}export default function DataTable(_ref){let{columns,rows,initialSort,onRowClick}=_ref;const[sortKey,setSortKey]=useState((initialSort===null||initialSort===void 0?void 0:initialSort.key)||'');const[direction,setDirection]=useState((initialSort===null||initialSort===void 0?void 0:initialSort.direction)||'asc');const[query,setQuery]=useState('');const filtered=useMemo(()=>{if(!query)return rows;const q=query.toLowerCase();return rows.filter(r=>columns.some(c=>{var _r$c$key;return String((_r$c$key=r[c.key])!==null&&_r$c$key!==void 0?_r$c$key:'').toLowerCase().includes(q);}));},[rows,query,columns]);const sorted=useMemo(()=>sortRows(filtered,sortKey,direction),[filtered,sortKey,direction]);const onSort=key=>{if(sortKey===key){setDirection(d=>d==='asc'?'desc':'asc');}else{setSortKey(key);setDirection('asc');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dt\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dt-toolbar\",children:/*#__PURE__*/_jsx(\"input\",{className:\"dt-search\",placeholder:\"Search...\",value:query,onChange:e=>setQuery(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"dt-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"dt-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(col=>/*#__PURE__*/_jsxs(\"th\",{onClick:()=>onSort(col.key),children:[/*#__PURE__*/_jsx(\"span\",{children:col.label}),sortKey===col.key&&/*#__PURE__*/_jsx(\"span\",{className:\"dt-sort \".concat(direction),children:direction==='asc'?'▲':'▼'})]},col.key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:sorted.map((row,idx)=>/*#__PURE__*/_jsx(\"tr\",{onClick:onRowClick?()=>onRowClick(row):undefined,className:onRowClick?'dt-row-clickable':'',children:columns.map(col=>/*#__PURE__*/_jsx(\"td\",{children:col.render?col.render(row[col.key],row):row[col.key]},col.key))},idx))})]})})]});}","map":{"version":3,"names":["React","useMemo","useState","jsx","_jsx","jsxs","_jsxs","sortRows","rows","sortKey","direction","m","sort","a","b","av","bv","String","localeCompare","reverse","DataTable","_ref","columns","initialSort","onRowClick","setSortKey","key","setDirection","query","setQuery","filtered","q","toLowerCase","filter","r","some","c","_r$c$key","includes","sorted","onSort","d","className","children","placeholder","value","onChange","e","target","map","col","onClick","label","concat","row","idx","undefined","render"],"sources":["C:/Work/UserSystemLogAnalyzer/WebApp/ClientApp/src/components/DataTable.js"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport './DataTable.css';\r\n\r\nfunction sortRows(rows, sortKey, direction) {\r\n  if (!sortKey) return rows;\r\n  const m = [...rows].sort((a, b) => {\r\n    const av = a[sortKey];\r\n    const bv = b[sortKey];\r\n    if (av === bv) return 0;\r\n    if (av == null) return -1;\r\n    if (bv == null) return 1;\r\n    if (typeof av === 'number' && typeof bv === 'number') return av - bv;\r\n    return String(av).localeCompare(String(bv));\r\n  });\r\n  return direction === 'desc' ? m.reverse() : m;\r\n}\r\n\r\nexport default function DataTable({ columns, rows, initialSort, onRowClick }) {\r\n  const [sortKey, setSortKey] = useState(initialSort?.key || '');\r\n  const [direction, setDirection] = useState(initialSort?.direction || 'asc');\r\n  const [query, setQuery] = useState('');\r\n\r\n  const filtered = useMemo(() => {\r\n    if (!query) return rows;\r\n    const q = query.toLowerCase();\r\n    return rows.filter(r => columns.some(c => String(r[c.key] ?? '').toLowerCase().includes(q)));\r\n  }, [rows, query, columns]);\r\n\r\n  const sorted = useMemo(() => sortRows(filtered, sortKey, direction), [filtered, sortKey, direction]);\r\n\r\n  const onSort = (key) => {\r\n    if (sortKey === key) {\r\n      setDirection(d => (d === 'asc' ? 'desc' : 'asc'));\r\n    } else {\r\n      setSortKey(key);\r\n      setDirection('asc');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dt\">\r\n      <div className=\"dt-toolbar\">\r\n        <input className=\"dt-search\" placeholder=\"Search...\" value={query} onChange={(e) => setQuery(e.target.value)} />\r\n      </div>\r\n      <div className=\"dt-wrapper\">\r\n        <table className=\"dt-table\">\r\n          <thead>\r\n            <tr>\r\n              {columns.map(col => (\r\n                <th key={col.key} onClick={() => onSort(col.key)}>\r\n                  <span>{col.label}</span>\r\n                  {sortKey === col.key && (\r\n                    <span className={`dt-sort ${direction}`}>{direction === 'asc' ? '▲' : '▼'}</span>\r\n                  )}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sorted.map((row, idx) => (\r\n              <tr\r\n                key={idx}\r\n                onClick={onRowClick ? () => onRowClick(row) : undefined}\r\n                className={onRowClick ? 'dt-row-clickable' : ''}\r\n              >\r\n                {columns.map(col => (\r\n                  <td key={col.key}>{col.render ? col.render(row[col.key], row) : row[col.key]}</td>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}