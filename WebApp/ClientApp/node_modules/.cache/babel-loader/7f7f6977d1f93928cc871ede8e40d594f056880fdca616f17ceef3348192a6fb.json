{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'/api';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});export const fetchConfig=async()=>{const response=await api.get('/config');return response.data;};export const fetchSessions=async()=>{const response=await api.get('/logs/sessions');return response.data;};export const fetchAvailableModels=async provider=>{const response=await api.get('/models/available',{params:{provider}});return response.data;};export const runAnalysis=async settings=>{const response=await api.post('/analyze',{use_llm:settings.useLlm,model:settings.model,provider:settings.provider});return response.data;};export const fetchLatestReport=async()=>{const response=await api.get('/reports/latest');return response.data;};export const fetchAnalysisState=async()=>{const response=await api.get('/analysis/state');return response.data;};export const checkHealth=async()=>{const response=await api.get('/health');return response.data;};export const exportReport=async function(){let format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'json';let reportType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'General Report';try{console.log('exportReport called with format:',format,'reportType:',reportType);// For JSON and CSV, use direct link download via GET request\nif(format==='json'||format==='csv'){console.log('Triggering direct download for:',format);// Create direct download link\nconst url=\"\".concat(API_BASE_URL,\"/reports/export?format=\").concat(format,\"&reportType=\").concat(encodeURIComponent(reportType));console.log('Download URL:',url);// Open in new window to trigger download\nwindow.open(url,'_blank');console.log('Download window opened');return{success:true,filename:\"fleet_analysis.\".concat(format)};}else{// For other formats, expect JSON response\nconsole.log('Requesting JSON response for:',format);const response=await api.post('/reports/export',{format});console.log('JSON response received:',response.data);return response.data;}}catch(error){var _error$response,_error$response2,_error$response3,_error$response3$data;console.error('Export error details:',{message:error.message,response:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data,status:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status});return{success:false,error:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||error.message||'Export failed'};}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","fetchConfig","response","get","data","fetchSessions","fetchAvailableModels","provider","params","runAnalysis","settings","post","use_llm","useLlm","model","fetchLatestReport","fetchAnalysisState","checkHealth","exportReport","format","arguments","length","undefined","reportType","console","log","url","concat","encodeURIComponent","window","open","success","filename","error","_error$response","_error$response2","_error$response3","_error$response3$data","message","status"],"sources":["C:/Work/UserSystemLogAnalyzer/WebApp/ClientApp/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport const fetchConfig = async () => {\r\n  const response = await api.get('/config');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchSessions = async () => {\r\n  const response = await api.get('/logs/sessions');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchAvailableModels = async (provider) => {\r\n  const response = await api.get('/models/available', {\r\n    params: { provider }\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport const runAnalysis = async (settings) => {\r\n  const response = await api.post('/analyze', {\r\n    use_llm: settings.useLlm,\r\n    model: settings.model,\r\n    provider: settings.provider\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport const fetchLatestReport = async () => {\r\n  const response = await api.get('/reports/latest');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchAnalysisState = async () => {\r\n  const response = await api.get('/analysis/state');\r\n  return response.data;\r\n};\r\n\r\nexport const checkHealth = async () => {\r\n  const response = await api.get('/health');\r\n  return response.data;\r\n};\r\n\r\nexport const exportReport = async (format = 'json', reportType = 'General Report') => {\r\n  try {\r\n    console.log('exportReport called with format:', format, 'reportType:', reportType);\r\n    \r\n    // For JSON and CSV, use direct link download via GET request\r\n    if (format === 'json' || format === 'csv') {\r\n      console.log('Triggering direct download for:', format);\r\n      \r\n      // Create direct download link\r\n      const url = `${API_BASE_URL}/reports/export?format=${format}&reportType=${encodeURIComponent(reportType)}`;\r\n      console.log('Download URL:', url);\r\n      \r\n      // Open in new window to trigger download\r\n      window.open(url, '_blank');\r\n      \r\n      console.log('Download window opened');\r\n      return { success: true, filename: `fleet_analysis.${format}` };\r\n    } else {\r\n      // For other formats, expect JSON response\r\n      console.log('Requesting JSON response for:', format);\r\n      const response = await api.post('/reports/export', { format });\r\n      console.log('JSON response received:', response.data);\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    console.error('Export error details:', {\r\n      message: error.message,\r\n      response: error.response?.data,\r\n      status: error.response?.status\r\n    });\r\n    return { \r\n      success: false, \r\n      error: error.response?.data?.error || error.message || 'Export failed'\r\n    };\r\n  }\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}